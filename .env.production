# ===== FileCraft Production Environment Configuration for Railway =====
# This file contains production-ready environment variables for Railway deployment
# Set these variables in your Railway environment variables section

# ===== Environment =====
ENVIRONMENT=production

# ===== API Configuration =====
PROJECT_NAME=FileCraft
PROJECT_DESCRIPTION=Professional file conversion and processing API with advanced encoding/decoding capabilities
VERSION=1.2.0
API_V1_PREFIX=/api/v1
DEBUG=false

# ===== Documentation Configuration =====
# Disable docs in production for security (set to false) or keep enabled if needed
ENABLE_DOCS=false
ENABLE_SWAGGER_UI=false
ENABLE_REDOC=false
ENABLE_OPENAPI=false
DOCS=/docs
REDOC_URL=/redoc
OPENAPI_URL=/api/openapi.json

# ===== Server Configuration =====
HOST=0.0.0.0
# Railway automatically assigns PORT, but we set a default
PORT=8000
WORKERS=4
RELOAD=false
LOG_LEVEL=info

# ===== Security Configuration =====
# CRITICAL: Set these to strong random values in Railway environment variables
SECRET_KEY=REPLACE_WITH_STRONG_SECRET_KEY_IN_RAILWAY
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# JWT Configuration
JWT_SECRET_KEY=REPLACE_WITH_STRONG_JWT_SECRET_IN_RAILWAY
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# API Key configuration
API_KEY_NAME=X-API-Key
API_KEY_HEADER=X-API-Key
ENABLE_API_KEY_AUTH=false

# ===== CORS Configuration =====
# Railway domain configuration
ALLOWED_HOSTS=["filecraft-production.up.railway.app", "*.railway.app"]
CORS_ORIGINS=["https://filecraft-production.up.railway.app"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH", "HEAD"]
CORS_ALLOW_HEADERS=["Accept", "Accept-Language", "Content-Language", "Content-Type", "Authorization", "X-Requested-With", "X-API-Key", "Access-Control-Allow-Origin", "Access-Control-Allow-Headers", "Access-Control-Allow-Methods"]

# ===== Rate Limiting =====
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=200
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_PER_IP=2000

# ===== File Upload Configuration =====
# Reduced limits for production stability
MAX_UPLOAD_SIZE=104857600
MAX_IMAGE_SIZE_MB=25
MAX_AUDIO_SIZE_MB=100
MAX_VIDEO_SIZE_MB=250

# ===== Database Configuration (Railway PostgreSQL) =====
# Railway will provide these automatically, but you can override if needed
# DATABASE_URL will be automatically provided by Railway PostgreSQL service
DB_HOSTNAME=${PGHOST}
DB_PORT=${PGPORT}
DB_DATABASE=${PGDATABASE}
DB_USER=${PGUSER}
DB_PASSWORD=${PGPASSWORD}

# ===== Redis Configuration (Railway Redis) =====
# Railway will provide REDIS_URL automatically if you add Redis service
REDIS_URL=${REDIS_URL}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_DB=0
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_SSL=true

# ===== Celery Configuration =====
# Use Railway Redis for Celery
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=1800
CELERY_TASK_SOFT_TIME_LIMIT=1500

# ===== Processing Configuration =====
ENABLE_ASYNC_PROCESSING=true
MAX_CONCURRENT_TASKS=8
TASK_TIMEOUT=300

# Image processing (optimized for Railway)
IMAGE_QUALITY_DEFAULT=80
MAX_IMAGE_PIXELS=178956970
IMAGE_MEMORY_LIMIT=268435456

# Audio processing
AUDIO_BITRATE_DEFAULT=128
AUDIO_SAMPLE_RATE_DEFAULT=44100

# Video processing (reduced for Railway limits)
VIDEO_BITRATE_DEFAULT=800k
VIDEO_FPS_DEFAULT=24
VIDEO_RESOLUTION_DEFAULT=1280x720

# ===== Monitoring & Logging =====
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_ENDPOINT=/health

# Logging configuration (Railway handles log aggregation)
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5

# ===== Feature Flags =====
ENABLE_ADMIN_PANEL=false
ENABLE_WEBHOOKS=false
ENABLE_BATCH_PROCESSING=true
ENABLE_REAL_TIME_PROCESSING=true

# ===== External Services =====
# AWS S3 Configuration (recommended for file storage in production)
AWS_ACCESS_KEY_ID=SET_IN_RAILWAY_ENV_VARS
AWS_SECRET_ACCESS_KEY=SET_IN_RAILWAY_ENV_VARS
AWS_REGION=us-east-1
S3_BUCKET_NAME=SET_IN_RAILWAY_ENV_VARS
ENABLE_S3_STORAGE=false

# Email Configuration
SMTP_HOST=SET_IN_RAILWAY_ENV_VARS
SMTP_PORT=587
SMTP_USER=SET_IN_RAILWAY_ENV_VARS
SMTP_PASSWORD=SET_IN_RAILWAY_ENV_VARS
SMTP_TLS=true
EMAIL_FROM=noreply@your-domain.com
ENABLE_EMAIL_NOTIFICATIONS=false

# Webhook configuration
WEBHOOK_SECRET=SET_IN_RAILWAY_ENV_VARS
WEBHOOK_TIMEOUT=30
MAX_WEBHOOK_RETRIES=3

# ===== Cache Configuration =====
CACHE_TTL=3600
ENABLE_RESPONSE_CACHE=true
CACHE_MAX_SIZE=1000

# ===== Error Tracking =====
# Recommended: Set up Sentry for error tracking in production
SENTRY_DSN=SET_IN_RAILWAY_ENV_VARS
ENABLE_PROFILING=false

# ===== API Documentation Configuration =====
CONTACT_NAME=FileCraft Support
CONTACT_EMAIL=support@your-domain.com
CONTACT_URL=https://your-domain.com/support
LICENSE_NAME=MIT License
LICENSE_URL=https://opensource.org/licenses/MIT
TERMS_OF_SERVICE=https://your-domain.com/terms

# ===== Railway Specific Configuration =====
# Railway automatically sets PORT, but we can reference it
# PORT is automatically provided by Railway

# ===== Production Security Notes =====
# 1. All SECRET_KEY and JWT_SECRET_KEY must be set in Railway environment variables
# 2. Replace placeholder domains with your actual Railway app URL and custom domains
# 3. Database and Redis URLs will be automatically provided by Railway services
# 4. Consider enabling S3 storage for file persistence across deployments
# 5. Set up proper CORS origins for your frontend applications
# 6. Enable Sentry for error tracking and monitoring
# 7. Consider setting up email notifications for important events